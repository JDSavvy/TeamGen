#!/bin/bash

echo "üîë API Key Best Practices f√ºr Claude Code + GitHub Integration"
echo "============================================================"

echo ""
echo "üìã AKTUELLE SITUATION:"
echo "====================="
echo "1. Claude Code CLI: Nutzt lokalen API Key (Terminal/Environment)"
echo "2. GitHub Actions: Nutzt Repository Secret ANTHROPIC_API_KEY"
echo "3. M√∂gliche Unterschiede: Ja, k√∂nnen verschiedene Keys sein"
echo ""

echo "üéØ BEST PRACTICE EMPFEHLUNGEN:"
echo "=============================="
echo ""
echo "1. VERSCHIEDENE API KEYS F√úR VERSCHIEDENE UMGEBUNGEN:"
echo "   ‚úÖ Development (Claude Code CLI): Pers√∂nlicher API Key"
echo "   ‚úÖ CI/CD (GitHub Actions): Projekt-spezifischer API Key"
echo "   ‚úÖ Production: Separater API Key mit limitierten Permissions"
echo ""

echo "2. WARUM GETRENNTE KEYS?"
echo "   üîí Sicherheit: Verschiedene Berechtigungen pro Environment"
echo "   üìä Monitoring: Separate Nutzungs-Tracking"
echo "   üö´ Isolation: Pers√∂nliche vs. Projekt-Usage"
echo "   üí∞ Kosten: Separate Billing/Workspace-Zuordnung"
echo ""

echo "3. ANTHROPIC WORKSPACES NUTZEN:"
echo "   üìÅ Personal Workspace: F√ºr Claude Code CLI"
echo "   üè¢ Project Workspace: F√ºr GitHub Actions"
echo "   üíº Organization Workspace: F√ºr Team-Projekte"
echo ""

echo "4. KONKRETE SETUP-EMPFEHLUNG:"
echo "   1. Erstelle separate API Keys:"
echo "      - https://console.anthropic.com/account/keys"
echo "      - 'TeamGen-Development' (f√ºr CLI)"
echo "      - 'TeamGen-CI-CD' (f√ºr GitHub Actions)"
echo ""
echo "   2. Konfiguriere Umgebungen:"
echo "      - Lokal: export ANTHROPIC_API_KEY='sk-ant-dev-xxx'"
echo "      - GitHub: Repository Secret mit 'sk-ant-cicd-xxx'"
echo ""

echo "5. SICHERHEITS-BEST-PRACTICES:"
echo "   ‚úÖ Verschiedene Keys f√ºr verschiedene Zwecke"
echo "   ‚úÖ Regelm√§√üige Key-Rotation"
echo "   ‚úÖ Monitoring der API-Nutzung"
echo "   ‚úÖ Minimale Berechtigungen pro Key"
echo "   ‚úÖ Sichere Storage (Environment Variables, Secrets)"
echo ""

echo "6. AKTUELLER CHECK:"
echo "   - Lokaler API Key: ${ANTHROPIC_API_KEY:0:12}..."
echo "   - GitHub Secret: Pr√ºfe Repository Settings"
echo "   - Recommendation: Beide Keys sollten unterschiedlich sein"
echo ""

echo "üö® WICHTIGE SICHERHEITS-PUNKTE:"
echo "==============================="
echo "- NIEMALS API Keys in Code committen"
echo "- IMMER Environment Variables verwenden"
echo "- Verschiedene Keys f√ºr verschiedene Environments"
echo "- Regelm√§√üige √úberpr√ºfung der Key-Berechtigungen"
echo "- Monitoring der API-Nutzung und -Kosten"
echo ""

echo "üìä VORTEILE DER TRENNUNG:"
echo "========================"
echo "‚úÖ Sicherheit: Lokaler Kompromiss betrifft nicht CI/CD"
echo "‚úÖ Monitoring: Separate Nutzungsstatistiken"
echo "‚úÖ Kosten: Klare Zuordnung der API-Calls"
echo "‚úÖ Flexibilit√§t: Verschiedene Rate Limits m√∂glich"
echo "‚úÖ Compliance: Bessere Audit-Trails"
echo ""

echo "üîß SETUP-KOMMANDOS:"
echo "=================="
echo "# 1. Neuen API Key erstellen:"
echo "# https://console.anthropic.com/account/keys"
echo ""
echo "# 2. Lokalen Key setzen:"
echo "export ANTHROPIC_API_KEY='sk-ant-dev-YOUR_DEV_KEY'"
echo ""
echo "# 3. GitHub Secret setzen:"
echo "# https://github.com/JDSavvy/TeamGen/settings/secrets/actions"
echo "# Name: ANTHROPIC_API_KEY"
echo "# Value: sk-ant-cicd-YOUR_CICD_KEY"
echo ""
echo "# 4. Keys in verschiedenen Workspaces organisieren"